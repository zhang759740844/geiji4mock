(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){e.exports=a(290)},162:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(4),r=a.n(c),s=(a(162),a(89),a(38)),o=(a(66),a(12)),l=(a(291),a(150)),d=(a(170),a(108)),h=(a(172),a(146)),u=a(64),m=(a(111),a(14)),g=a(52),f=a(53),p=a(58),k=a(54),v=a(59),b=(a(175),a(46)),y=(a(112),a(45)),x=(a(178),a(151)),w=(a(180),a(80)),E=a.n(w),M=a(87),S=a(26),D=a(27);function C(){var e=Object(S.a)(["\n  position: absolute;\n  border-top: 1px solid lightgray;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  .button {\n    float: right;\n    width: 80px;\n    margin: 10px 10px 10px 10px;\n  }\n"]);return C=function(){return e},e}function O(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  b {\n    margin-bottom: 10px;\n    margin-top: 10px;\n  }\n"]);return O=function(){return e},e}function j(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  .textarea {\n    flex: 1\n  }\n  .btn-container {\n    display: flex;\n    width: 100%;\n    margin-top: 10px;\n    border-radius: 5px;\n    overflow: hidden;\n    margin-bottom: -10px;\n  }\n  .delete-btn {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: red;\n    color: white;\n    font-size: 20px;\n    height: 40px\n  }\n  .save-btn {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: rgb(42, 121, 254);\n    color: white;\n    font-size: 20px;\n    height: 40px;\n  }\n  .format {\n    position: absolute;\n    right: 20px;\n    bottom: 50px;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    background: red;\n    color: white;\n    z-index: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: bold;\n  }\n"]);return j=function(){return e},e}function A(){var e=Object(S.a)(["\n  display: flex;\n  height: 60px;\n  margin-bottom: 10px;\n  align-items: center;\n  width: 100%;\n  background: white;\n  padding: 0 20px 0 20px;\n  .interface {\n    flex: 1;\n    font-weight: bold;\n  }\n  .hint {\n    margin-right: 10px\n  }\n"]);return A=function(){return e},e}function N(){var e=Object(S.a)(["\n  height: 40px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  span {\n    flex: 1;\n  }\n"]);return N=function(){return e},e}function L(){var e=Object(S.a)(["\n  height: calc(100vh - 64px - 30px);\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  .bottom {\n    height: 30px;\n    border-top: 1px solid lightgray;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n  }\n  .button {\n    float: right;\n    width: 100px;\n    margin: 10px 10px 10px 10px;\n  }\n"]);return L=function(){return e},e}function I(){var e=Object(S.a)(["\n  display: flex;\n  float: right;\n  align-items: center;\n  .img {\n    width: 31px;\n    height: 31px;\n    border-radius: 50%;\n  }\n  .text {\n    margin-left: 10px;\n    font-size: 15px;\n    color: white;\n  }\n"]);return I=function(){return e},e}var _=D.a.div(I()),P=D.a.div(L()),B=D.a.div(N()),R=D.a.div(A()),J=D.a.div(j()),z=D.a.div(O()),T=D.a.div(C()),U=a(57),H=a(22),Y=a.n(H),K="http://localhost:3010",Q={register:"/user/register",login:"/user/login",getUserInfo:"/user/userinfo",changeDomain:"/user/change-domain"},F={mockList:"/mock/mock-list",switchMock:"/mock/switch-mock",mockInfo:"/mock/mock-info",swithYAPI:"/mock/switch-yapi",updateMock:"/mock/update-mock",deleteMock:"/mock/delete-mock",deleteAll:"/mock/delete-all",closeAll:"/mock/close-all"},q=a(148),G=a.n(q),V=(a(202),a(152)),W=(a(110),a(37)),X=W.a.Option,Z=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(p.a)(this,Object(k.a)(t).call(this,e))).state={show:!1,domain:"",yapi:"",domainScheme:"http://",yapiScheme:"http://"},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){console.log("hahah")}},{key:"openDrawer",value:function(){var e=this;Y.a.get(K+Q.getUserInfo,{withCredentials:!0}).then(function(t){if(200!==t.data.code)m.a.error(t.data.message);else{var a=t.data.data;e.setState({domain:a.domain,yapi:a.yapi,domainScheme:a.domain_scheme,yapiScheme:a.yapi_scheme,show:!0})}})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"changeHost",value:function(e,t){t?this.setState({domain:e.target.value}):this.setState({yapi:e.target.value})}},{key:"changeScheme",value:function(e,t){t?this.setState({domainScheme:e}):this.setState({yapiScheme:e})}},{key:"submitDomain",value:function(){var e=this;Y.a.post(K+Q.changeDomain,{domain:this.state.domain,yapi:this.state.yapi,domainScheme:this.state.domainScheme,yapiScheme:this.state.yapiScheme},{withCredentials:!0}).then(function(t){200!==t.data.code?m.a.error(t.data.message):(m.a.success("\u66f4\u65b0\u57df\u540d\u6210\u529f"),e.setState({show:!1}))})}},{key:"renderSelectBefore",value:function(e){var t=this,a=e?this.state.domainScheme:this.state.yapiScheme;return i.a.createElement(W.a,{value:a,onChange:function(a){t.changeScheme(a,e)},style:{width:100}},i.a.createElement(X,{value:"http://"},"http://"),i.a.createElement(X,{value:"https://"},"https://"))}},{key:"render",value:function(){var e=this;return i.a.createElement(V.a,{title:"\u8bbe\u7f6e\u57df\u540d",width:720,visible:this.state.show,onClose:function(){e.onClose()}},i.a.createElement(z,null,i.a.createElement("b",null,"\u4e3b\u57df\u540d"),i.a.createElement(y.a,{value:this.state.domain,addonBefore:this.renderSelectBefore(!0),onChange:function(t){e.changeHost(t,!0)}}),i.a.createElement("b",null,"yapi\u57df\u540d"),i.a.createElement(y.a,{value:this.state.yapi,addonBefore:this.renderSelectBefore(!1),onChange:function(t){e.changeHost(t,!1)}})),i.a.createElement(T,null,i.a.createElement(o.a,{className:"button",type:"primary",onClick:function(){e.submitDomain()}},"\u786e\u5b9a"),i.a.createElement(o.a,{className:"button",onClick:function(){e.setState({show:!1})}},"\u53d6\u6d88")))}}]),t}(i.a.Component),$=x.a.confirm,ee=y.a.Search,te=y.a.TextArea,ae=b.a.Header,ne=b.a.Content,ie=b.a.Sider,ce=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(p.a)(this,Object(k.a)(t).call(this,e))).state={isLogined:!!e.cookies.get("userInfo"),userInfo:e.cookies.get("userInfo"),interfaceList:[],searchedInterfaceList:[],selectedMockData:{},searchString:"",searching:!1,addingMock:!1,addingMockData:{interface_name:"",mock_data:""}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getMockList(),window.addEventListener("keydown",function(t){83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),e.refs.changeTextArea&&e.refs.changeTextArea.blur(),e.submitMockData())})}},{key:"getMockList",value:function(){var e=this;Y.a.get(K+F.mockList,{withCredentials:!0}).then(function(t){if(200===t.data.code)return e.setState({interfaceList:t.data.data}),t.data.data[0];m.a.error(t.data.message)}).then(function(e){if(e){var t=e.id;return Y.a.get(K+F.mockInfo+"?id=".concat(t),{withCredentials:!0})}}).then(function(t){t&&(t&&200!==t.data.code?m.a.error(t.data.message):e.setState({selectedMockData:t.data.data}))})}},{key:"changeSearchString",value:function(e){this.setState({searchString:e.target.value})}},{key:"searchMockItem",value:function(e){var t=this.state.interfaceList.filter(function(t){return-1!==t.interface_name.indexOf(e)});this.setState({searching:!0,searchString:e,searchedInterfaceList:t})}},{key:"createMockData",value:function(){this.setState({addingMockData:Object(u.a)({},this.state.addingMockData,{interface_name:this.state.searchString}),addingMock:!0})}},{key:"deleteAll",value:function(){var e=this;$({title:"\u786e\u8ba4\u5168\u90e8\u5220\u9664\uff1f",onOk:function(){Y.a.get(K+F.deleteAll,{withCredentials:!0}).then(function(t){200!==t.data.code?m.a.error("\u5220\u9664\u4e0d\u6210\u529f"):(m.a.success("\u5220\u9664\u6210\u529f"),e.setState({interfaceList:[],searchedInterfaceList:[]}))})}})}},{key:"closeAll",value:function(){var e=this;Y.a.get(K+F.closeAll,{withCredentials:!0}).then(function(t){if(200!==t.data.code)m.a.error("\u5173\u95ed\u4e0d\u6210\u529f");else{m.a.success("\u5173\u95ed\u6210\u529f");var a=e.state.interfaceList.map(function(e){return Object.assign({},e,{isopen:!1})}),n=e.state.searchedInterfaceList.map(function(e){return Object.assign({},e,{isopen:!1})});e.setState({interfaceList:a,searchedInterfaceList:n})}})}},{key:"changeMockSwitch",value:function(e,t){var a=this;t.isopen=e,Y.a.get(K+F.switchMock+"?id=".concat(t.id,"&state=").concat(e),{withCredentials:!0}).then(function(e){200===e.data.code?a.setState({interfaceList:a.state.interfaceList}):m.a.error(e.data.message)})}},{key:"changeYAPISwitch",value:function(e){var t=this,a=this.state.selectedMockData;Y.a.get(K+F.swithYAPI+"?id=".concat(a.id,"&state=").concat(e),{withCredentials:!0}).then(function(a){200===a.data.code?t.setState({selectedMockData:Object(u.a)({},t.state.selectedMockData,{use_yapi:e})}):m.a.error(a.data.message)})}},{key:"changeMockData",value:function(e){this.setState({selectedMockData:Object(u.a)({},this.state.selectedMockData,{mock_data:e.target.value})})}},{key:"changeAddMockData",value:function(e){this.setState({addingMockData:Object(u.a)({},this.state.addingMockData,{mock_data:e.target.value})})}},{key:"changeMockInterfaceName",value:function(e){this.setState({addingMockData:Object(u.a)({},this.state.addingMockData,{interface_name:e.target.value})})}},{key:"getMockDetail",value:function(e){var t=this;Y.a.get(K+F.mockInfo+"?id=".concat(e.id),{withCredentials:!0}).then(function(e){200===e.data.code?t.setState({selectedMockData:e.data.data}):m.a.error(e.data.message)})}},{key:"formatJSON",value:function(){var e=null;if(this.state.addingMock)try{e=JSON.parse(this.state.addingMockData.mock_data)}catch(a){alert(a)}else try{e=JSON.parse(this.state.selectedMockData.mock_data)}catch(a){alert(a)}if(e){var t=JSON.stringify(e,null,2);this.state.addingMock?this.setState({addingMockData:Object.assign(this.state.addingMockData,{mock_data:t})}):this.setState({selectedMockData:Object.assign(this.state.selectedMockData,{mock_data:t})})}}},{key:"submitMockData",value:function(){var e=this,t=this.state.addingMock?this.state.addingMockData:this.state.selectedMockData;Y.a.post(K+F.updateMock,{data:t.mock_data,interfaceName:t.interface_name},{withCredentials:!0}).then(function(a){200!==a.data.code?m.a.error(a.data.message):(m.a.success("\u63a5\u53e3 ".concat(t.interface_name," \u4fdd\u5b58\u6210\u529f")),e.setState({addingMockData:{interface_name:"",mock_data:""},searchString:"",searching:!1}),e.getMockList())})}},{key:"cancelAddMockData",value:function(){this.setState({addingMock:!1})}},{key:"deleteMockData",value:function(){var e=this;Y.a.post(K+F.deleteMock,{id:this.state.selectedMockData.id}).then(function(t){200!==t.data.code?m.a.error(t.data.message):(m.a.success("\u5220\u9664\u6210\u529f"),e.getMockList())})}},{key:"renderLoginBtn",value:function(){return i.a.createElement(M.b,{to:"/login"},i.a.createElement(_,null,i.a.createElement(h.a,{size:32,icon:"user"}),i.a.createElement("span",{className:"text"},"\u767b\u5f55/\u6ce8\u518c")))}},{key:"render",value:function(){var e=this,t=this.state.searching?this.state.searchedInterfaceList:this.state.interfaceList;return i.a.createElement(b.a,null,i.a.createElement(Z,{ref:"drawer"}),i.a.createElement(ae,null,this.state.isLogined?i.a.createElement(_,{onClick:function(){e.refs.drawer.openDrawer()}},i.a.createElement("img",{src:E.a,className:"img"}),i.a.createElement("span",{className:"text"},this.state.userInfo)):this.renderLoginBtn(),i.a.createElement("h1",{style:{color:"white"}},"\u81ea\u52a9Mock")),i.a.createElement(b.a,null,i.a.createElement(ie,{width:400,style:{background:"#fff"}},i.a.createElement(P,null,i.a.createElement(ee,{value:this.state.searchString,placeholder:"\u8f93\u5165 API \u540d",onChange:function(t){e.changeSearchString(t)},onSearch:function(t){e.searchMockItem(t)},enterButton:!0}),0!==t.length?i.a.createElement(l.a,{rowKey:function(e){return e.id},dataSource:t,itemLayout:"horizontal",renderItem:function(t){return i.a.createElement(G.a,null,i.a.createElement(B,{onClick:function(){e.getMockDetail(t)}},i.a.createElement("span",null,t.interface_name),i.a.createElement(d.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",checked:t.isopen,onChange:function(a,n){n.stopPropagation(),e.changeMockSwitch(a,t)}})))}}):i.a.createElement(s.a,{style:{marginTop:"100px"},image:"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original",imageStyle:{height:60},description:i.a.createElement("span",null," \u672a\u627e\u5230\u76f8\u5173\u63a5\u53e3 ")},i.a.createElement(o.a,{hidden:!this.state.isLogined,onClick:function(){e.createMockData()},type:"primary"},"\u73b0\u5728\u521b\u5efa\uff1f")),i.a.createElement("div",{className:"bottom"},i.a.createElement(o.a,{onClick:function(){e.deleteAll()},className:"button",type:"danger"},"\u5220\u9664\u5168\u90e8"),i.a.createElement(o.a,{onClick:function(){e.closeAll()},className:"button"},"\u5168\u90e8\u5173\u95ed"),i.a.createElement(o.a,{className:"button",onClick:function(){e.setState({addingMock:!0})},type:"primary"},"\u7acb\u5373\u6dfb\u52a0")))),i.a.createElement(b.a,{hidden:!this.state.isLogined||0===this.state.interfaceList.length&&!this.state.addingMock,style:{padding:"24px 24px 24px"}},this.state.addingMock?i.a.createElement(R,null,i.a.createElement(y.a,{value:this.state.addingMockData.interface_name,onChange:function(t){e.changeMockInterfaceName(t)},onPaste:function(t){e.changeMockInterfaceName(t)},placeholder:"\u8bf7\u8f93\u5165\u6dfb\u52a0\u7684\u63a5\u53e3"})):i.a.createElement(R,null,i.a.createElement("span",{className:"interface"},this.state.selectedMockData.interface_name),i.a.createElement("span",{className:"hint"},"\u4f7f\u7528YAPI?"),i.a.createElement(d.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",checked:this.state.selectedMockData.use_yapi,onChange:function(t){e.changeYAPISwitch(t)}})),i.a.createElement(ne,{style:{background:"#fff",padding:24,margin:0,minHeight:500}},i.a.createElement(J,null,i.a.createElement(o.a,{className:"format",onClick:function(){e.formatJSON()}},"\u683c\u5f0f\u5316"),this.state.addingMock?i.a.createElement(te,{className:"textarea",value:this.state.addingMockData.mock_data,onChange:function(t){e.changeAddMockData(t)},onPaste:function(t){e.changeAddMockData(t)}}):i.a.createElement(te,{ref:"changeTextArea",className:"textarea",value:this.state.selectedMockData.mock_data,onChange:function(t){e.changeMockData(t)},onPaste:function(t){e.changeMockData(t)}}),i.a.createElement("div",{className:"btn-container"},this.state.addingMock?i.a.createElement("div",{className:"delete-btn",onClick:function(){e.cancelAddMockData()}},"\u53d6\u6d88"):i.a.createElement("div",{className:"delete-btn",onClick:function(){e.deleteMockData()}},"\u5220\u9664"),i.a.createElement("div",{className:"save-btn",onClick:function(){e.submitMockData()}},"\u4fdd\u5b58")))))))}}]),t}(i.a.Component),re=Object(U.b)(ce),se=(a(286),a(8)),oe=(a(288),a(154));function le(){var e=Object(S.a)(["\n  width: 300px;\n  height: 40px;\n  border-radius: 6px;\n  border: 1px solid lightgray;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  padding: 0 10px 0 10px;\n  .iconfont {\n    color: lightgray;\n  }\n  .input {\n    flex: 1;\n    margin-left: 10px;\n    border: 0;\n    outline: none;\n    background-color: rgba(0, 0, 0, 0);\n    ::placeholder {\n      color: lightgray;\n    }\n  }\n"]);return le=function(){return e},e}function de(){var e=Object(S.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  height: 60px;\n  .alert {\n    height: 60px;\n  }\n"]);return de=function(){return e},e}function he(){var e=Object(S.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid lightgray;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  padding: 20px;\n  .img {\n    height: 80px;\n    width: 80px;\n    align-items: center;\n    margin-bottom: 20px;\n    border-radius: 50%;\n  }\n  button {\n    margin-bottom: 20px;\n    border-radius: 18px;\n    height: 36px;\n  }\n  u {\n    font-size: 16px;\n    color: blue;\n    float: right;\n    text-align: right;\n    margin: -10px 10px 10px 0;\n  }\n"]);return he=function(){return e},e}var ue=D.a.div(he()),me=D.a.div(de()),ge=D.a.div(le()),fe=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(p.a)(this,Object(k.a)(t).call(this,e))).state={isRegister:!1,username:"",password:"",confirmPassword:"",showError:!1,errorMessage:""},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"registerUser",value:function(e){this.setState({isRegister:!e})}},{key:"showErrorMessage",value:function(e){var t=this;this.setState({showError:!0,errorMessage:e}),setTimeout(function(){t.setState({showError:!1})},2e3)}},{key:"submit",value:function(){var e=this;this.state.username&&this.state.password?this.state.isRegister&&this.state.password!==this.state.confirmPassword?this.showErrorMessage("\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"):Y.a.post(K+(this.state.isRegister?Q.register:Q.login),{username:this.state.username,password:this.state.password},{withCredentials:!0}).then(function(t){console.log(t.data),200===t.data.code?window.location.href="./":e.showErrorMessage(t.data.message)}):this.showErrorMessage("\u7528\u6237\u540d\u6216\u5bc6\u7801\u8f93\u5165\u9519\u8bef")}},{key:"changeUserName",value:function(e){this.setState({username:e})}},{key:"changePassword",value:function(e){this.setState({password:e})}},{key:"changeConfirmPassword",value:function(e){this.setState({confirmPassword:e})}},{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement(me,null,this.state.showError?i.a.createElement(oe.a,{className:"alert",message:this.state.errorMessage,type:"error",showIcon:!0}):null),i.a.createElement(ue,null,i.a.createElement("img",{src:E.a,className:"img"}),i.a.createElement(ge,null,i.a.createElement(se.a,{type:"user",className:"iconfont"}),i.a.createElement("input",{value:this.state.username,placeholder:"\u7528\u6237\u540d",className:"input",onChange:function(t){e.changeUserName(t.target.value)}})),i.a.createElement(ge,null,i.a.createElement(se.a,{type:"lock",className:"iconfont"}),i.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",className:"input",onChange:function(t){e.changePassword(t.target.value)}})),i.a.createElement(ge,{hidden:!this.state.isRegister},i.a.createElement(se.a,{type:"lock",className:"iconfont"}),i.a.createElement("input",{type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801",className:"input",onChange:function(t){e.changeConfirmPassword(t.target.value)}})),i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("u",{onClick:function(){e.registerUser(e.state.isRegister)}},this.state.isRegister?"\u53d6\u6d88\u6ce8\u518c":"\u6ce8\u518c\u7528\u6237")),i.a.createElement(o.a,{onClick:function(){e.submit()},type:"primary",block:!0},this.state.isRegister?"\u6ce8\u518c":"\u767b\u5f55")))}}]),t}(i.a.Component),pe=Object(U.b)(fe),ke=a(44);r.a.render(i.a.createElement(function(){return i.a.createElement(U.a,null,i.a.createElement("div",null,i.a.createElement(M.a,null,i.a.createElement(ke.a,{exact:!0,path:"/",render:function(){return i.a.createElement(re,null)}}),i.a.createElement(ke.a,{exact:!0,path:"/login",render:function(){return i.a.createElement(pe,null)}}),i.a.createElement(ke.a,{exact:!0,path:"/detail",render:function(){return i.a.createElement("div",null,"hahah")}}))))},null),document.getElementById("root"))},80:function(e,t,a){e.exports=a.p+"static/media/author.d662a8b3.png"}},[[157,1,2]]]);
//# sourceMappingURL=main.de944d50.chunk.js.map